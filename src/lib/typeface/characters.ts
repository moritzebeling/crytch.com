/**
 * Character definitions for the Crytch typeface
 * Each character is a single continuous path with 14 anchor points
 * Ported from v/2/characters.js
 */

export interface CharacterDefinition {
  /** Width in grid units */
  span: number;
  /** Path coordinates [x, y] in grid units */
  points: [number, number][];
}

export const CHARACTERS: Record<string, CharacterDefinition> = {
  // Lowercase letters
  a: { span: 3, points: [[0,3],[1,2],[2,2],[3,3],[3,7],[3,6],[2,7],[1,7],[0,6],[0,5],[1,4],[2,4],[3,4],[2,4]] },
  b: { span: 3, points: [[0,0],[0,7],[2,7],[3,6],[3,3],[2,2],[1,2],[0,3]] },
  c: { span: 3, points: [[3,4],[3,3],[2,2],[1,2],[0,3],[0,6],[1,7],[2,7],[3,6]] },
  d: { span: 3, points: [[3,0],[3,7],[3,6],[2,7],[1,7],[0,6],[0,3],[1,2],[3,2]] },
  e: { span: 3, points: [[0,4],[3,4],[3,3],[2,2],[1,2],[0,3],[0,6],[1,7],[2,7],[3,6],[2,7]] },
  f: { span: 2, points: [[2,0],[1,0],[0,1],[0,7],[0,3],[2,3]] },
  g: { span: 3, points: [[3,6],[2,7],[1,7],[0,6],[0,3],[1,2],[3,2],[3,8],[2,9],[1,9],[0,8]] },
  h: { span: 3, points: [[0,0],[0,7],[0,3],[1,2],[2,2],[3,3],[3,7]] },
  i: { span: 2, points: [[1,2],[2,2],[2,0],[0,0],[0,2],[1,2],[1,7],[0,7],[2,7],[0,7],[1,7],[1,2],[0,2],[0,0]] },
  j: { span: 2, points: [[1,2],[0,2],[0,0],[2,0],[2,2],[1,2],[1,8],[0,9]] },
  k: { span: 3, points: [[0,0],[0,7],[0,3],[1,2],[2,2],[3,3],[3,4],[2,5],[1,5],[0,4],[3,7]] },
  l: { span: 2, points: [[0,4],[2,2],[2,0],[0,0],[0,6],[1,7],[2,7]] },
  m: { span: 6, points: [[0,2],[0,7],[0,3],[1,2],[2,2],[3,3],[3,7],[3,3],[4,2],[5,2],[6,3],[6,7]] },
  n: { span: 3, points: [[0,2],[0,7],[0,3],[1,2],[2,2],[3,3],[3,7]] },
  o: { span: 3, points: [[0,3],[0,7],[2,7],[3,6],[3,2],[1,2],[0,3]] },
  p: { span: 3, points: [[0,2],[0,9],[0,7],[2,7],[3,6],[3,3],[2,2],[1,2],[0,3]] },
  q: { span: 3, points: [[3,6],[2,7],[1,7],[0,6],[0,3],[1,2],[3,2],[3,9]] },
  r: { span: 3, points: [[0,7],[3,7],[1,7],[1,3],[2,2],[3,2],[3,3]] },
  s: { span: 3, points: [[3,4],[3,3],[2,2],[1,2],[0,3],[0,4],[1,4],[2,5],[3,5],[3,6],[2,7],[1,7],[0,6],[0,5]] },
  t: { span: 3, points: [[1,1],[1,2],[0,2],[3,2],[1,2],[1,7],[2,7],[3,6],[3,5]] },
  u: { span: 3, points: [[0,2],[0,6],[1,7],[2,7],[3,6],[3,7],[3,2]] },
  v: { span: 3, points: [[0,2],[0,7],[1,7],[3,5],[3,2]] },
  w: { span: 4, points: [[0,2],[0,6],[1,7],[2,6],[3,7],[4,6],[4,2]] },
  x: { span: 4, points: [[0,3],[0,2],[2,4],[4,2],[4,3],[4,2],[2,4],[2,5],[0,7],[0,6],[0,7],[2,5],[4,7],[4,6]] },
  y: { span: 3, points: [[0,2],[0,6],[1,7],[2,7],[3,6],[3,2],[3,8],[2,9],[1,9],[0,8]] },
  z: { span: 3, points: [[0,3],[0,2],[3,2],[3,3],[0,6],[0,7],[3,7],[3,6]] },
  
  // German special characters
  "ß": { span: 4, points: [[0,2],[1,2],[1,7],[1,1],[2,0],[3,0],[4,1],[4,2],[3,3],[4,4],[4,6],[3,7]] },
  
  // Uppercase letters
  A: { span: 4, points: [[0,7],[0,1],[1,0],[3,0],[4,1],[4,7],[4,4],[0,4]] },
  B: { span: 4, points: [[0,0],[3,0],[4,1],[4,2],[3,3],[0,3],[3,3],[4,4],[4,6],[3,7],[0,7],[0,0]] },
  C: { span: 4, points: [[4,2],[4,1],[3,0],[1,0],[0,1],[0,6],[1,7],[3,7],[4,6],[4,5]] },
  D: { span: 4, points: [[0,0],[0,7],[3,7],[4,6],[4,1],[3,0],[0,0]] },
  E: { span: 4, points: [[4,1],[4,0],[0,0],[0,4],[3,4],[3,3],[3,5],[3,4],[0,4],[0,7],[4,7],[4,6]] },
  F: { span: 4, points: [[4,1],[4,0],[0,0],[0,4],[3,4],[3,3],[3,5],[3,4],[0,4],[0,7]] },
  G: { span: 4, points: [[2,3],[4,3],[4,7],[4,6],[3,7],[1,7],[0,6],[0,1],[1,0],[3,0],[4,1],[4,2]] },
  H: { span: 4, points: [[0,0],[0,7],[0,3],[4,3],[4,0],[4,7]] },
  I: { span: 2, points: [[0,0],[2,0],[1,0],[1,7],[0,7],[2,7]] },
  J: { span: 3, points: [[0,1],[0,0],[3,0],[3,6],[2,7],[1,7],[0,6],[0,4]] },
  K: { span: 4, points: [[0,0],[0,7],[0,3],[2,3],[4,1],[4,0],[4,1],[2,3],[4,5],[4,7]] },
  L: { span: 4, points: [[0,0],[0,7],[4,7]] },
  M: { span: 6, points: [[0,7],[0,0],[3,3],[6,0],[6,7],[6,0],[3,3],[0,0],[0,7]] },
  N: { span: 4, points: [[0,7],[0,0],[4,4],[4,0],[4,7],[4,0],[4,4],[0,0],[0,7]] },
  O: { span: 4, points: [[0,1],[0,6],[1,7],[3,7],[4,6],[4,5],[4,1],[3,0],[1,0],[0,1]] },
  P: { span: 4, points: [[0,4],[3,4],[4,3],[4,1],[3,0],[0,0],[0,7],[0,0],[3,0],[4,1],[4,3],[3,4],[0,4]] },
  Q: { span: 5, points: [[5,7],[5,8],[4,8],[3,7],[1,7],[0,6],[0,1],[1,0],[3,0],[4,1],[4,6],[3,7],[4,6],[4,1]] },
  R: { span: 4, points: [[0,7],[0,0],[3,0],[4,1],[4,3],[3,4],[0,4],[3,4],[4,5],[4,7],[4,5]] },
  S: { span: 4, points: [[4,2],[4,1],[3,0],[1,0],[0,1],[0,2],[1,3],[3,3],[4,4],[4,6],[3,7],[1,7],[0,6],[0,5]] },
  T: { span: 4, points: [[0,1],[0,0],[4,0],[4,1],[4,0],[2,0],[2,7],[1,7],[3,7]] },
  U: { span: 4, points: [[0,0],[0,6],[1,7],[3,7],[4,6],[4,0],[4,6],[3,7],[1,7],[0,6],[0,0]] },
  V: { span: 4, points: [[0,0],[0,5],[2,7],[4,5],[4,0]] },
  W: { span: 6, points: [[0,0],[0,6],[1,7],[2,7],[3,6],[3,0],[3,6],[4,7],[5,7],[6,6],[6,0],[6,6],[5,7],[4,7]] },
  X: { span: 6, points: [[0,0],[3,3],[6,0],[3,3],[3,4],[0,7],[3,4],[6,7],[3,4],[0,7],[3,4],[3,3],[6,0]] },
  Y: { span: 4, points: [[0,0],[0,2],[2,4],[4,2],[4,0],[4,2],[2,4],[2,7],[0,7],[4,7]] },
  Z: { span: 4, points: [[0,1],[0,0],[4,0],[4,1],[0,5],[0,7],[4,7],[4,5]] },
  
  // Numbers
  "1": { span: 3, points: [[0,2],[0,1],[1,0],[2,0],[2,7],[0,7],[3,7]] },
  "2": { span: 4, points: [[0,2],[0,1],[1,0],[3,0],[4,1],[4,3],[3,4],[1,4],[0,5],[0,7],[4,7],[4,6]] },
  "3": { span: 4, points: [[0,1],[0,0],[4,0],[4,1],[2,3],[4,5],[4,6],[3,7],[1,7],[0,6],[0,5]] },
  "4": { span: 4, points: [[4,5],[0,5],[0,3],[3,0],[3,7],[1,7],[4,7],[1,7],[3,7],[3,0],[0,3],[0,5],[4,5]] },
  "5": { span: 4, points: [[4,1],[4,0],[0,0],[0,3],[3,3],[4,4],[4,6],[3,7],[0,7],[3,7],[4,6],[4,4],[3,3],[0,3]] },
  "6": { span: 4, points: [[4,2],[4,1],[3,0],[1,0],[0,1],[0,6],[1,7],[3,7],[4,6],[4,4],[3,3],[1,3],[0,4]] },
  "7": { span: 4, points: [[0,0],[4,0],[4,2],[0,7],[4,2],[4,0],[0,0]] },
  "8": { span: 3, points: [[1,0],[2,0],[3,1],[3,2],[0,5],[0,6],[1,7],[2,7],[3,6],[3,5],[0,2],[0,1],[1,0],[0,1]] },
  "9": { span: 4, points: [[0,6],[1,7],[3,7],[4,6],[4,1],[3,0],[1,0],[0,1],[0,3],[1,4],[3,4],[4,3]] },
  "0": { span: 4, points: [[0,1],[0,6],[4,2],[0,6],[1,7],[3,7],[4,6],[4,5],[4,1],[3,0],[1,0],[0,1]] },
  
  // Punctuation
  period: { span: 2, points: [[0,5],[0,7],[2,7],[2,5],[0,5]] },
  comma: { span: 2, points: [[2,7],[0,7],[0,5],[2,5],[2,7],[2,8],[1,9]] },
  question: { span: 3, points: [[1,5],[2,5],[2,7],[0,7],[0,5],[1,5],[1,4],[3,2],[3,1],[2,0],[1,0],[0,1],[0,2],[0,1]] },
  exclamation: { span: 2, points: [[1,5],[2,5],[2,7],[0,7],[0,5],[1,5],[1,0]] },
  ampersand: { span: 5, points: [[5,4],[2,7],[1,7],[0,6],[0,5],[3,2],[3,1],[2,0],[1,0],[0,1],[0,2],[5,7],[0,2],[0,1]] },
  dash: { span: 3, points: [[0,4],[3,4]] },
  bracketopen: { span: 1, points: [[1,0],[0,0],[0,7],[1,7]] },
  bracketclosed: { span: 1, points: [[0,0],[1,0],[1,7],[0,7]] },
  roundbracketopen: { span: 1, points: [[1,0],[0,1],[0,6],[1,7],[0,6],[0,1],[1,0]] },
  roundbracketclosed: { span: 1, points: [[0,0],[1,1],[1,6],[0,7],[1,6],[1,1],[0,0]] },
  curlybracketopen: { span: 2, points: [[2,0],[1,1],[1,2],[0,3],[0,4],[1,5],[1,6],[2,7]] },
  curlybracketclosed: { span: 2, points: [[0,0],[1,1],[1,2],[2,3],[2,4],[1,5],[1,6],[0,7]] },
  colon: { span: 2, points: [[2,4],[0,4],[0,2],[2,2],[2,4],[0,5],[0,7],[2,7],[2,5],[0,5],[2,5]] },
  semicolon: { span: 2, points: [[2,4],[0,4],[0,2],[2,2],[2,4],[0,5],[0,7],[2,7],[2,8],[1,9],[2,8],[2,7],[2,5],[0,5]] },
  euro: { span: 4, points: [[4,0],[2,0],[1,1],[1,3],[3,3],[0,3],[1,3],[1,4],[3,4],[0,4],[1,4],[1,6],[2,7],[4,7]] },
  dollar: { span: 4, points: [[4,0],[1,0],[0,1],[0,2],[1,3],[2,3],[2,1],[2,6],[2,3],[3,3],[4,4],[4,6],[3,7],[0,7]] },
  sterling: { span: 4, points: [[4,2],[4,1],[3,0],[2,0],[1,1],[1,4],[0,4],[3,4],[1,4],[1,6],[0,7],[3,7],[4,6]] },
  at: { span: 4, points: [[3,5],[2,4],[1,5],[1,6],[4,6],[4,3],[3,2],[1,2],[0,3],[0,8],[1,9],[3,9],[4,8]] },
  underscore: { span: 3, points: [[0,7],[3,7]] },
  slash: { span: 7, points: [[0,7],[7,0]] },
  pipe: { span: 2, points: [[1,0],[1,7]] },
  backslash: { span: 7, points: [[0,0],[7,7]] },
  apostrophe: { span: 2, points: [[1,4],[2,3],[2,0],[0,0],[0,2],[2,2]] },
  quotationenopen: { span: 5, points: [[1,-2],[0,-1],[0,2],[2,2],[2,0],[0,0],[2,0],[2,2],[3,0],[5,0],[5,2],[3,2],[3,-1],[4,-2]] },
  quotationenclosed: { span: 5, points: [[1,4],[2,3],[2,0],[0,0],[0,2],[2,2],[3,0],[5,0],[5,2],[3,2],[3,0],[3,2],[5,2],[5,3],[4,4]] },
  quotationdeopen: { span: 5, points: [[1,9],[2,8],[2,5],[0,5],[0,7],[2,7],[3,5],[5,5],[5,7],[3,7],[3,5],[3,7],[5,7],[5,8],[4,9]] },
  
  // Accented characters
  a_acute: { span: 3, points: [[0,3],[1,2],[2,2],[3,1],[2,2],[3,3],[3,7],[3,6],[2,7],[1,7],[0,6],[0,5],[1,4],[3,4]] },
  a_grave: { span: 3, points: [[0,3],[1,2],[0,1],[1,2],[2,2],[3,3],[3,7],[3,6],[2,7],[1,7],[0,6],[0,5],[1,4],[3,4]] },
  e_acute: { span: 3, points: [[0,4],[3,4],[3,3],[2,2],[3,1],[2,2],[1,2],[0,3],[0,6],[1,7],[2,7],[3,6]] },
  e_grave: { span: 3, points: [[0,4],[3,4],[3,3],[2,2],[1,2],[0,1],[1,2],[0,3],[0,6],[1,7],[2,7],[3,6]] },
  c_cedille: { span: 3, points: [[3,4],[3,3],[2,2],[1,2],[0,3],[0,6],[1,7],[2,7],[2,8],[1,8]] },
  
  // Symbols
  asterisk: { span: 4, points: [[0,4],[4,4],[2,4],[2,2],[2,6],[2,4],[1,5],[3,3],[2,4],[1,3],[3,5]] },
  plus: { span: 4, points: [[0,4],[4,4],[2,4],[2,2],[2,6]] },
  multiply: { span: 4, points: [[0,2],[4,6],[2,4],[4,2],[0,6]] },
  hashtag: { span: 4, points: [[1,2],[1,6],[1,3],[0,3],[4,3],[1,3],[1,5],[0,5],[4,5],[3,5],[3,6],[3,2]] },
  
  // Ligatures / Special combos
  ae: { span: 6, points: [[0,3],[1,2],[2,2],[3,3],[3,6],[2,7],[1,7],[0,6],[0,5],[1,4],[6,4],[6,3],[5,2],[4,2],[3,3],[3,6],[4,7],[5,7],[6,6],[5,7],[4,7],[3,6],[3,3],[4,2],[5,2],[6,3],[6,4],[1,4]] },
  oe: { span: 6, points: [[3,4],[3,6],[2,7],[0,7],[0,3],[1,2],[3,2],[3,4],[6,4],[6,3],[5,2],[4,2],[3,3],[3,6],[4,7],[5,7],[6,6],[5,7],[4,7],[3,6],[3,3],[4,2],[5,2],[6,3],[6,4],[3,4],[3,2],[1,2]] },
  ue: { span: 6, points: [[0,2],[0,6],[1,7],[2,7],[3,6],[3,2],[3,4],[6,4],[6,3],[5,2],[4,2],[3,3],[3,6],[4,7],[5,7],[6,6],[5,7],[4,7],[3,6],[3,3],[4,2],[5,2],[6,3],[6,4],[3,4],[3,2],[3,6],[2,7]] },
  AE: { span: 8, points: [[0,7],[0,1],[1,0],[3,0],[4,1],[4,4],[0,4],[7,4],[7,3],[7,5],[7,4],[4,4],[4,7],[8,7],[8,6],[8,7],[4,7],[4,0],[8,0],[8,1],[8,0],[4,0],[4,7],[8,7],[8,6],[8,7],[4,7],[4,4]] },
  OE: { span: 8, points: [[8,6],[8,7],[1,7],[0,6],[0,1],[1,0],[1,0],[8,0],[8,1],[8,0],[4,0],[4,4],[7,4],[7,3],[7,5],[7,4],[4,4],[4,7],[4,4],[7,4],[7,5],[7,3],[7,4],[4,4],[4,0],[8,0],[8,1],[8,0]] },
  UE: { span: 8, points: [[0,0],[0,6],[1,7],[3,7],[4,6],[4,0],[8,0],[8,1],[8,0],[4,0],[4,4],[7,4],[7,3],[7,5],[7,4],[4,4],[4,7],[8,7],[8,6],[8,7],[4,7],[4,4],[7,4],[7,5],[7,3],[7,4],[4,4],[4,0]] },
};

/**
 * Character mappings for special characters that map to named keys
 */
export const CHAR_MAPPINGS: Record<string, string> = {
  ".": "period",
  ",": "comma",
  "?": "question",
  "!": "exclamation",
  "&": "ampersand",
  "-": "dash",
  "–": "dash",
  "[": "bracketopen",
  "]": "bracketclosed",
  "(": "roundbracketopen",
  ")": "roundbracketclosed",
  "{": "curlybracketopen",
  "}": "curlybracketclosed",
  ":": "colon",
  ";": "semicolon",
  "€": "euro",
  "$": "dollar",
  "£": "sterling",
  "@": "at",
  "_": "underscore",
  "/": "slash",
  "|": "pipe",
  "\\": "backslash",
  "'": "apostrophe",
  "\"": "quotationenopen",
  "\u201C": "quotationenclosed",
  "\u201E": "quotationdeopen",
  "*": "asterisk",
  "+": "plus",
  "×": "multiply",
  "#": "hashtag",
  // Accented characters
  "á": "a_acute",
  "à": "a_grave",
  "é": "e_acute",
  "è": "e_grave",
  "ç": "c_cedille",
  // German umlauts
  "ä": "ae",
  "ö": "oe",
  "ü": "ue",
  "Ä": "AE",
  "Ö": "OE",
  "Ü": "UE",
  "æ": "ae",
  "œ": "oe",
  "Æ": "AE",
  "Œ": "OE",
};

/**
 * Get character definition, handling special character mappings
 */
export function getCharacter(char: string): CharacterDefinition | null {
  // Direct lookup
  if (CHARACTERS[char]) {
    return CHARACTERS[char];
  }
  
  // Mapped lookup
  const mappedKey = CHAR_MAPPINGS[char];
  if (mappedKey && CHARACTERS[mappedKey]) {
    return CHARACTERS[mappedKey];
  }
  
  return null;
}

/**
 * Check if a character is supported
 */
export function isCharacterSupported(char: string): boolean {
  return getCharacter(char) !== null;
}
